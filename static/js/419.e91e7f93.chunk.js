"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[419],{4419:function(e,t,s){s.r(t),s.d(t,{default:function(){return V},withRouter:function(){return z}});var n=s(5671),r=s(3144),a=s(136),o=s(4104),i=s(1413),u=s(2791),l={},c={wrapper:"ProfileInfo_wrapper__mO+zt"},f=s(6159),p=s(9439),d="ProfileStatus_wrapper__KUY+-",h="ProfileStatus_status__RTL2w",v="ProfileStatus_statusEmpty__psr9N",m=s(184),x=function(e){var t=(0,u.useState)(!1),s=(0,p.Z)(t,2),n=s[0],r=s[1],a=(0,u.useState)(e.status),o=(0,p.Z)(a,2),i=o[0],l=o[1];(0,u.useEffect)((function(){l(e.status)}),[e.status]);var c=function(){e.disable||(r(!n),n&&e.updateStatus(i))};return(0,m.jsx)("div",{className:d,children:n?(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{type:"text",value:i,autoFocus:!0,onChange:function(e){l(e.currentTarget.value)}}),(0,m.jsx)("button",{onClick:c,children:"Save"})]}):(0,m.jsx)("div",{children:(0,m.jsx)("span",{onClick:c,children:e.status?(0,m.jsx)("p",{className:h,children:e.status}):(0,m.jsx)("p",{className:v,children:"\u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u0443\u0441\u0442"})})})})},j="Info_wrapper__pj6wF",_=s(4942),P="InfoItem_wrapper__e07Q2",g="InfoItem_title__U7UYP",I="InfoItem_input__P+j3w",N="InfoItem_value__qZv79",w="InfoItem_error__wa77R",Z=function(e){var t=e.title,s=e.value,n=e.propertyName,r=e.updateProfileInfo,a=e.updateContactsHandler,o=e.required,i=e.isOwner,l=(0,u.useState)(!1),c=(0,p.Z)(l,2),f=c[0],d=c[1],h=(0,u.useState)(s),v=(0,p.Z)(h,2),x=v[0],j=v[1],Z=(0,u.useState)(!1),b=(0,p.Z)(Z,2),S=b[0],k=b[1];(0,u.useEffect)((function(){j(s)}),[s]);return(0,m.jsxs)("div",{className:P,children:[(0,m.jsx)("div",{className:g,children:t}),f?(0,m.jsx)("input",{className:I+" "+(S?w:""),type:"text",onBlur:function(){var e=function(){d(!f),r&&r((0,_.Z)({},n,x)),a&&a((0,_.Z)({},n,x))};o&&f?x?e():k(!0):e()},onChange:function(e){j(e.currentTarget.value)},value:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e"===x?"":x,autoFocus:!0,required:o}):(0,m.jsx)("div",{className:N,onDoubleClick:function(){i||d(!0)},children:s})]})},b=function(e){var t=e.title,s=e.value,n=e.propertyName,r=e.updateProfileInfo,a=e.updateContactsHandler,o=e.required,i=e.isOwner,l=(0,u.useState)(!1),c=(0,p.Z)(l,2),f=c[0],d=c[1],h=(0,u.useState)(s),v=(0,p.Z)(h,2),x=v[0],j=v[1];(0,u.useEffect)((function(){j(s)}),[s]);return(0,m.jsxs)("div",{className:P,children:[(0,m.jsx)("div",{className:g,children:t}),f?(0,m.jsxs)("select",{className:I,value:x,onChange:function(e){j(e.currentTarget.value)},onBlur:function(){var e=function(){d(!f),r&&r((0,_.Z)({},n,x)),a&&a((0,_.Z)({},n,x))};o&&f?x&&e():e()},children:[(0,m.jsx)("option",{value:"true",children:"\u0414\u0430"}),(0,m.jsx)("option",{value:"false",children:"\u041d\u0435\u0442"})]}):(0,m.jsx)("div",{className:N,onDoubleClick:function(){i||d(!0)},children:"true"===s?"\u0414\u0430":"\u041d\u0435\u0442"})]})},S=function(e){var t=e.profile,s=e.updateProfileInfo,n=e.isOwner,r=(0,u.useState)(!1),a=(0,p.Z)(r,2);a[0],a[1];return(0,m.jsx)("div",{className:j,children:(0,m.jsx)(k,{profile:t,updateProfileInfo:s,isOwner:n})})},k=function(e){var t=e.profile,s=e.updateProfileInfo,n=e.isOwner,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s((0,i.Z)((0,i.Z)({},e),{},{contacts:(0,i.Z)({},t)}))};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Z,{title:"\u041e\u0431\u043e \u043c\u043d\u0435",value:null!==t&&void 0!==t&&t.aboutMe?t.aboutMe:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",propertyName:"aboutMe",updateProfileInfo:r,required:!0,isOwner:n}),(0,m.jsx)(b,{title:"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443",value:null!==t&&void 0!==t&&t.lookingForAJob?"true":"false",propertyName:"lookingForAJob",updateProfileInfo:r,isOwner:n}),(0,m.jsx)(Z,{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b",value:null!==t&&void 0!==t&&t.lookingForAJobDescription?t.lookingForAJobDescription:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",propertyName:"lookingForAJobDescription",updateProfileInfo:r,required:!0,isOwner:n}),(0,m.jsx)(Z,{title:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f",value:null!==t&&void 0!==t&&t.fullName?t.fullName:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",propertyName:"fullName",updateProfileInfo:r,required:!0,isOwner:n}),(null===t||void 0===t?void 0:t.contacts)&&Object.entries(t.contacts).map((function(e,t){return(0,m.jsx)(Z,{title:e[0],value:e[1]?e[1]:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e",propertyName:e[0],updateContactsHandler:function(e){r({},(0,i.Z)({},e))},isOwner:n},t)}))]})};var y=s.p+"static/media/cameraIcon.a7feac5401668801d732932c26801513.svg",O=s(8055),C={imgBox:"ProfileImg_imgBox__ivjqD",profilePhoto:"ProfileImg_profilePhoto__Niofe",label:"ProfileImg_label__GiOxi",input:"ProfileImg_input__vI0-L",icon:"ProfileImg_icon__8T4U1"},T=function(e){var t=e.profile,s=e.savePhoto,n=e.isOwner,r=(null===t||void 0===t?void 0:t.photos.large)||O;return(0,m.jsxs)("div",{className:C.imgBox,children:[(0,m.jsx)("img",{className:C.profilePhoto,src:r,alt:""}),n&&(0,m.jsxs)("div",{className:C.inputBox,children:[(0,m.jsx)("label",{className:C.label,htmlFor:"fileInput",children:(0,m.jsx)("img",{className:C.icon,src:y,alt:""})}),(0,m.jsx)("input",{className:C.input,id:"fileInput",type:"file",onChange:function(e){var t;null!==(t=e.currentTarget.files)&&void 0!==t&&t.length&&s(e.currentTarget.files[0])}})]})]})},A=function(e){var t=e.profile,s=e.status,n=e.updateStatus,r=e.isOwner,a=e.savePhoto,o=e.updateProfileInfo;return t?(0,m.jsxs)("div",{className:c.wrapper,children:[(0,m.jsx)(T,{profile:t,savePhoto:a,isOwner:r}),(0,m.jsxs)("div",{className:c.infoBox,children:[(0,m.jsx)(x,{status:s,updateStatus:n,disable:!r}),(0,m.jsx)(S,{profile:t,updateProfileInfo:o,isOwner:!r})]})]}):(0,m.jsx)(f.p,{})},D={posts:"MyPosts_posts__GSiZ2",textareaBox:"MyPosts_textareaBox__xgjlg",textarea:"MyPosts_textarea__TKsaX",button:"MyPosts_button__TKXtI"},F="Post_itemInner__uKAr-",B="Post_item__Yu4oG";function q(e){return(0,m.jsxs)("div",{className:B,children:[(0,m.jsxs)("div",{className:F,children:[(0,m.jsx)("img",{src:"https://kartinkived.ru/wp-content/uploads/2021/12/avatarka-dlya-vatsapa-panda-v-ochkah.jpg",alt:""}),e.message]}),e.likesCount," likes"]})}var M=s(6139),U=s(704),E=s(4193),J=s(3485),H=(0,u.memo)((function(e){var t=e.posts,s=e.addPost,n=t.map((function(e){return(0,m.jsx)(q,{message:e.message,likesCount:e.likesCount},e.id)}));return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:D.postsHeader,children:[(0,m.jsx)("h5",{children:"MyPosts"}),(0,m.jsx)(K,{onSubmit:function(e){s(e.newPostText)}})]}),(0,m.jsx)("div",{className:D.posts,children:n})]})})),K=(0,U.Z)({form:"newPost"})((function(e){return(0,m.jsxs)("form",{className:D.textareaBox,onSubmit:e.handleSubmit,children:[(0,m.jsx)(M.Z,{className:D.textarea,name:"newPostText",component:J.g,placeholder:"Tell something",validate:[E.C1,E.cE]}),(0,m.jsx)("button",{className:D.button,children:"add"})]})})),R=s(9350),Y=s(364);console.log("render");var G=(0,Y.$j)((function(e){return{posts:e.profilePage.postsData}}),(function(e){return{addPost:function(t){e((0,R.Wl)(t))}}}))(H),$=function(e){var t=e.profile,s=e.status,n=e.updateStatus,r=e.isOwner,a=e.savePhoto,o=e.updateProfileInfo;return(0,m.jsxs)("div",{className:l.content,children:[(0,m.jsx)(A,{profile:t,status:s,updateStatus:n,isOwner:r,savePhoto:a,updateProfileInfo:o}),(0,m.jsx)(G,{})]})},L=s(7689),Q=s(2932),X=s(7781);function z(e){return function(t){var s=(0,L.s0)(),n={params:(0,L.UO)()};return(0,m.jsx)(e,(0,i.Z)((0,i.Z)({},t),{},{match:n,navigate:s}))}}var W=function(e){(0,a.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,r.Z)(s,[{key:"refreshProfileInfo",value:function(){var e=this.props.match.params.userId;!e&&this.props.userId?e=this.props.userId.toString():this.props.navigate("/login"),this.props.getUser(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfileInfo()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfileInfo()}},{key:"render",value:function(){return(0,m.jsx)($,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,updateProfileInfo:this.props.updateProfileInfo})}}]),s}(u.Component),V=(0,X.qC)((0,Y.$j)((function(e){return{profile:e.profilePage.profile,isAuth:e.auth.isAuth,status:e.profilePage.status,userId:e.auth.id}}),(function(e){return{getUser:function(t){e((0,R.Y_)(t))},updateStatus:function(t){e((0,R.Nf)(t))},getStatus:function(t){e((0,R.jQ)(t))},savePhoto:function(t){e((0,R.Tw)(t))},updateProfileInfo:function(t){e((0,R.TR)(t))}}})),z,Q.D)(W)},2932:function(e,t,s){s.d(t,{D:function(){return c}});var n=s(1413),r=s(5987),a=(s(2791),s(364)),o=s(7689),i=s(184),u=["isAuth"],l=function(e){return{isAuth:e.auth.isAuth}},c=function(e){return(0,a.$j)(l)((function(t){t.isAuth;var s=(0,r.Z)(t,u);return t.isAuth?(0,i.jsx)(e,(0,n.Z)({},s)):(0,i.jsx)(o.Fg,{to:"/login"})}))}}}]);
//# sourceMappingURL=419.e91e7f93.chunk.js.map